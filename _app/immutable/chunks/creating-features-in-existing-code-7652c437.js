import{S as Li,i as Vi,s as Gi,k as l,q as a,a as f,l as n,m as h,r as s,h as t,c as d,K as Le,n as w,b as r,E as i,C as Zt}from"./index-a710900e.js";function Wi(Ui){let I,Ve,pe,P,Ge,me,m,Z,We,Je,Y,Ke,Qe,$,Xe,Ze,ee,Ye,ge,C,$e,we,F,et,ye,y,A,Yt,ve,D,tt,be,z,it,Ie,x,ot,ke,S,at,_e,T,st,Ee,B,rt,Oe,R,q,$t,Pe,u,lt,te,nt,ht,ie,ft,dt,oe,ct,ut,ae,pt,mt,Ce,j,gt,Fe,H,wt,Ae,k,yt,E,vt,bt,De,M,It,ze,N,U,ei,xe,p,kt,se,_t,Et,re,Ot,Pt,le,Ct,Ft,ne,At,Dt,Se,L,zt,Te,V,xt,Be,G,St,Re,O,Tt,W,ti,qe,c,Bt,he,Rt,qt,fe,jt,Ht,de,Mt,Nt,ce,Ut,Lt,ue,Vt,Gt,je,J,Wt,He,K,Jt,Me,Q,Kt,Ne,X,Qt;return{c(){I=l("p"),Ve=a("Updating a legacy system can feel like unraveling a complex knot, especially when the changes impact several parts of the app. This is a challenge I face often, and I’ve been on a quest to find a strategy that works consistently for me."),pe=f(),P=l("p"),Ge=a("I’ve managed to develop a process that I now rely on:"),me=f(),m=l("ol"),Z=l("li"),We=a("Understand the problem’s structure"),Je=f(),Y=l("li"),Ke=a("Initiate with tracing bullets – Make it work somehow"),Qe=f(),$=l("li"),Xe=a("Develop a more refined solution"),Ze=f(),ee=l("li"),Ye=a("Refactor again for optimization"),ge=f(),C=l("p"),$e=a("Let’s dive into these steps using my work on the PICABOO image editing app as an example."),we=f(),F=l("p"),et=a("Recently, I had to overhaul how we handle default settings for each filter. We shifted from a single default setting for all filters to a system where the backend allows custom overrides for each and every filter as needed. For example, adding a grain effect by default only for filters mimicking old cameras."),ye=f(),y=l("video"),A=l("source"),ve=f(),D=l("p"),tt=a("Now, let’s break down how we tackled this:"),be=f(),z=l("h2"),it=a("1. Understand the problem’s structure"),Ie=f(),x=l("p"),ot=a("Grasping the scope of the problem early is tough for me. I tend to get stuck planning and theorizing, which slows down the actual work. I’ve learned to jump in sooner rather than later, balancing a thorough understanding with forward motion."),ke=f(),S=l("p"),at=a("First, we identify all the components that the change will touch. At this point, it’s about getting a bird’s-eye view of the system as it stands. What’s the starting point for our changes? Do they affect other modules? Maybe there’s something we can reuse? I like to jot down any initial thoughts or TODOs in the code comments."),_e=f(),T=l("h3"),st=a("In the case of PICABOO"),Ee=f(),B=l("p"),rt=a("For PICABOO, I mapped out where the filter settings were integrated within the system and how they’d shift with user interactions. Here’s what that looked like:"),Oe=f(),R=l("p"),q=l("img"),Pe=f(),u=l("p"),lt=a("As illustrated, the "),te=l("code"),nt=a("FaderSettings"),ht=a(" establish the foundational tone for the workflow. After conversion to "),ie=l("code"),ft=a("NormalizedFilterSettings"),dt=a(", these settings, in conjunction with "),oe=l("code"),ct=a("FilterDefaults"),ut=a(", generate the "),ae=l("code"),pt=a("FilterSettings"),mt=a(" employed for displaying and exporting the edited image in the app."),Ce=f(),j=l("p"),gt=a("By the way I failed here on my first go by just skipping it. I thought I knew the codebase inside out. It turns out, I didn’t. I lost an hour fixing mistakes from my assumptions—the fader settings, not the normalized settings, were the key players here."),Fe=f(),H=l("h2"),wt=a("2. Initiate with tracing bullets – Make it functional"),Ae=f(),k=l("p"),yt=a("Inspired by the "),E=l("a"),vt=a("Pragmatic Programmer Book"),bt=a(", I learned to start with a rough, quick version. It’s not about perfection here—it’s about seeing the structure in action."),De=f(),M=l("h3"),It=a("In the case of PICABOO"),ze=f(),N=l("p"),U=l("img"),xe=f(),p=l("p"),kt=a("So it seems like there’s much more going on now, and indeed there is. After grasping the initial setup of the filter settings, I integrated the "),se=l("code"),_t=a("CustomizedFilterSettings"),Et=a(" directly into the creation process of the filter settings. Consequently, the "),re=l("code"),Ot=a("FaderSettings"),Pt=a(" couldn’t solely dictate the workflow anymore; the relationship had to be bidirectional. "),le=l("code"),Ct=a("FaderSettings"),Ft=a(" would generate "),ne=l("code"),At=a("NormalizedFilterSettings"),Dt=a(" and vice versa. This required a fair amount of rapid and rough coding—establishing mock backend data, tweaking settings, and yes, things got pretty chaotic at times."),Se=f(),L=l("h2"),zt=a("3. Develop a more refined solution"),Te=f(),V=l("p"),xt=a(`Now, resist the urge to just patch the initial draft. It’s time to step back, reassess the foundational structure, and redesign the solution from a clearer perspective. I often grab a pen and paper at this stage to sketch out my thoughts and redraw an optimized architecture.
As your solution should be pretty close to the it’s final form after this step, don’t forget to add your unit tests in this step. This way you don’t get bogged down in an architecture that is not testable. It also makes the last step easier, in which you refactor your solution further.`),Be=f(),G=l("h3"),St=a("In the case of PICABOO"),Re=f(),O=l("p"),Tt=a(`This led to a complete rewrite of how settings were managed, resulting in a much cleaner system.
`),W=l("img"),qe=f(),c=l("p"),Bt=a("Once again, we have a unified starting point, the "),he=l("code"),Rt=a("FilterRangesAndDefaultValues"),qt=a(", which can be tailored using the "),fe=l("code"),jt=a("CustomizedFilterSettings"),Ht=a(" for a specific filter. From here, we generate the filter settings for both exported and displayed images by combining the customized "),de=l("code"),Mt=a("FilterRangesAndDefaultValues"),Nt=a(" with the current "),ce=l("code"),Ut=a("FaderSettings"),Lt=a(". Although this might not seem significantly different from the previous method, it greatly simplifies the addition and modification of filter settings. Essentially, everything originates from the "),ue=l("code"),Vt=a("FilterRangesAndDefaultValues"),Gt=a(", and any changes here trigger compiler errors that help navigate through the entire architecture when necessary. In my view, this strategy is not just a necessary adaptation for integrating custom settings per filter but also an enhancement of the filter settings overall."),je=f(),J=l("h2"),Wt=a("4. Refactor again for optimization"),He=f(),K=l("p"),Jt=a("After refining, I create a draft PR to make it easier to review all modifications compared to the base branch. This step allows tweaking, optimizing, and streamlining before finalizing. Add a couple more tests and you are done!"),Me=f(),Q=l("h2"),Kt=a("Final note"),Ne=f(),X=l("p"),Qt=a("This personalized approach has made a huge difference for me. However, remember that once you’ve opened that PR, the review process begins. Embrace feedback, discuss openly, and refine further. Don’t be too narcissistic when it comes to your code. Take other people’s feedback into account, but don’t be afraid to disagree if you can rely on actual facts rather than feelings."),this.h()},l(e){I=n(e,"P",{});var o=h(I);Ve=s(o,"Updating a legacy system can feel like unraveling a complex knot, especially when the changes impact several parts of the app. This is a challenge I face often, and I’ve been on a quest to find a strategy that works consistently for me."),o.forEach(t),pe=d(e),P=n(e,"P",{});var ii=h(P);Ge=s(ii,"I’ve managed to develop a process that I now rely on:"),ii.forEach(t),me=d(e),m=n(e,"OL",{});var _=h(m);Z=n(_,"LI",{});var oi=h(Z);We=s(oi,"Understand the problem’s structure"),oi.forEach(t),Je=d(_),Y=n(_,"LI",{});var ai=h(Y);Ke=s(ai,"Initiate with tracing bullets – Make it work somehow"),ai.forEach(t),Qe=d(_),$=n(_,"LI",{});var si=h($);Xe=s(si,"Develop a more refined solution"),si.forEach(t),Ze=d(_),ee=n(_,"LI",{});var ri=h(ee);Ye=s(ri,"Refactor again for optimization"),ri.forEach(t),_.forEach(t),ge=d(e),C=n(e,"P",{});var li=h(C);$e=s(li,"Let’s dive into these steps using my work on the PICABOO image editing app as an example."),li.forEach(t),we=d(e),F=n(e,"P",{});var ni=h(F);et=s(ni,"Recently, I had to overhaul how we handle default settings for each filter. We shifted from a single default setting for all filters to a system where the backend allows custom overrides for each and every filter as needed. For example, adding a grain effect by default only for filters mimicking old cameras."),ni.forEach(t),ye=d(e),y=n(e,"VIDEO",{width:!0,height:!0});var hi=h(y);A=n(hi,"SOURCE",{src:!0,type:!0}),hi.forEach(t),ve=d(e),D=n(e,"P",{});var fi=h(D);tt=s(fi,"Now, let’s break down how we tackled this:"),fi.forEach(t),be=d(e),z=n(e,"H2",{});var di=h(z);it=s(di,"1. Understand the problem’s structure"),di.forEach(t),Ie=d(e),x=n(e,"P",{});var ci=h(x);ot=s(ci,"Grasping the scope of the problem early is tough for me. I tend to get stuck planning and theorizing, which slows down the actual work. I’ve learned to jump in sooner rather than later, balancing a thorough understanding with forward motion."),ci.forEach(t),ke=d(e),S=n(e,"P",{});var ui=h(S);at=s(ui,"First, we identify all the components that the change will touch. At this point, it’s about getting a bird’s-eye view of the system as it stands. What’s the starting point for our changes? Do they affect other modules? Maybe there’s something we can reuse? I like to jot down any initial thoughts or TODOs in the code comments."),ui.forEach(t),_e=d(e),T=n(e,"H3",{});var pi=h(T);st=s(pi,"In the case of PICABOO"),pi.forEach(t),Ee=d(e),B=n(e,"P",{});var mi=h(B);rt=s(mi,"For PICABOO, I mapped out where the filter settings were integrated within the system and how they’d shift with user interactions. Here’s what that looked like:"),mi.forEach(t),Oe=d(e),R=n(e,"P",{});var gi=h(R);q=n(gi,"IMG",{src:!0,alt:!0}),gi.forEach(t),Pe=d(e),u=n(e,"P",{});var v=h(u);lt=s(v,"As illustrated, the "),te=n(v,"CODE",{});var wi=h(te);nt=s(wi,"FaderSettings"),wi.forEach(t),ht=s(v," establish the foundational tone for the workflow. After conversion to "),ie=n(v,"CODE",{});var yi=h(ie);ft=s(yi,"NormalizedFilterSettings"),yi.forEach(t),dt=s(v,", these settings, in conjunction with "),oe=n(v,"CODE",{});var vi=h(oe);ct=s(vi,"FilterDefaults"),vi.forEach(t),ut=s(v,", generate the "),ae=n(v,"CODE",{});var bi=h(ae);pt=s(bi,"FilterSettings"),bi.forEach(t),mt=s(v," employed for displaying and exporting the edited image in the app."),v.forEach(t),Ce=d(e),j=n(e,"P",{});var Ii=h(j);gt=s(Ii,"By the way I failed here on my first go by just skipping it. I thought I knew the codebase inside out. It turns out, I didn’t. I lost an hour fixing mistakes from my assumptions—the fader settings, not the normalized settings, were the key players here."),Ii.forEach(t),Fe=d(e),H=n(e,"H2",{});var ki=h(H);wt=s(ki,"2. Initiate with tracing bullets – Make it functional"),ki.forEach(t),Ae=d(e),k=n(e,"P",{});var Ue=h(k);yt=s(Ue,"Inspired by the "),E=n(Ue,"A",{href:!0,rel:!0});var _i=h(E);vt=s(_i,"Pragmatic Programmer Book"),_i.forEach(t),bt=s(Ue,", I learned to start with a rough, quick version. It’s not about perfection here—it’s about seeing the structure in action."),Ue.forEach(t),De=d(e),M=n(e,"H3",{});var Ei=h(M);It=s(Ei,"In the case of PICABOO"),Ei.forEach(t),ze=d(e),N=n(e,"P",{});var Oi=h(N);U=n(Oi,"IMG",{src:!0,alt:!0}),Oi.forEach(t),xe=d(e),p=n(e,"P",{});var b=h(p);kt=s(b,"So it seems like there’s much more going on now, and indeed there is. After grasping the initial setup of the filter settings, I integrated the "),se=n(b,"CODE",{});var Pi=h(se);_t=s(Pi,"CustomizedFilterSettings"),Pi.forEach(t),Et=s(b," directly into the creation process of the filter settings. Consequently, the "),re=n(b,"CODE",{});var Ci=h(re);Ot=s(Ci,"FaderSettings"),Ci.forEach(t),Pt=s(b," couldn’t solely dictate the workflow anymore; the relationship had to be bidirectional. "),le=n(b,"CODE",{});var Fi=h(le);Ct=s(Fi,"FaderSettings"),Fi.forEach(t),Ft=s(b," would generate "),ne=n(b,"CODE",{});var Ai=h(ne);At=s(Ai,"NormalizedFilterSettings"),Ai.forEach(t),Dt=s(b," and vice versa. This required a fair amount of rapid and rough coding—establishing mock backend data, tweaking settings, and yes, things got pretty chaotic at times."),b.forEach(t),Se=d(e),L=n(e,"H2",{});var Di=h(L);zt=s(Di,"3. Develop a more refined solution"),Di.forEach(t),Te=d(e),V=n(e,"P",{});var zi=h(V);xt=s(zi,`Now, resist the urge to just patch the initial draft. It’s time to step back, reassess the foundational structure, and redesign the solution from a clearer perspective. I often grab a pen and paper at this stage to sketch out my thoughts and redraw an optimized architecture.
As your solution should be pretty close to the it’s final form after this step, don’t forget to add your unit tests in this step. This way you don’t get bogged down in an architecture that is not testable. It also makes the last step easier, in which you refactor your solution further.`),zi.forEach(t),Be=d(e),G=n(e,"H3",{});var xi=h(G);St=s(xi,"In the case of PICABOO"),xi.forEach(t),Re=d(e),O=n(e,"P",{});var Xt=h(O);Tt=s(Xt,`This led to a complete rewrite of how settings were managed, resulting in a much cleaner system.
`),W=n(Xt,"IMG",{src:!0,alt:!0}),Xt.forEach(t),qe=d(e),c=n(e,"P",{});var g=h(c);Bt=s(g,"Once again, we have a unified starting point, the "),he=n(g,"CODE",{});var Si=h(he);Rt=s(Si,"FilterRangesAndDefaultValues"),Si.forEach(t),qt=s(g,", which can be tailored using the "),fe=n(g,"CODE",{});var Ti=h(fe);jt=s(Ti,"CustomizedFilterSettings"),Ti.forEach(t),Ht=s(g," for a specific filter. From here, we generate the filter settings for both exported and displayed images by combining the customized "),de=n(g,"CODE",{});var Bi=h(de);Mt=s(Bi,"FilterRangesAndDefaultValues"),Bi.forEach(t),Nt=s(g," with the current "),ce=n(g,"CODE",{});var Ri=h(ce);Ut=s(Ri,"FaderSettings"),Ri.forEach(t),Lt=s(g,". Although this might not seem significantly different from the previous method, it greatly simplifies the addition and modification of filter settings. Essentially, everything originates from the "),ue=n(g,"CODE",{});var qi=h(ue);Vt=s(qi,"FilterRangesAndDefaultValues"),qi.forEach(t),Gt=s(g,", and any changes here trigger compiler errors that help navigate through the entire architecture when necessary. In my view, this strategy is not just a necessary adaptation for integrating custom settings per filter but also an enhancement of the filter settings overall."),g.forEach(t),je=d(e),J=n(e,"H2",{});var ji=h(J);Wt=s(ji,"4. Refactor again for optimization"),ji.forEach(t),He=d(e),K=n(e,"P",{});var Hi=h(K);Jt=s(Hi,"After refining, I create a draft PR to make it easier to review all modifications compared to the base branch. This step allows tweaking, optimizing, and streamlining before finalizing. Add a couple more tests and you are done!"),Hi.forEach(t),Me=d(e),Q=n(e,"H2",{});var Mi=h(Q);Kt=s(Mi,"Final note"),Mi.forEach(t),Ne=d(e),X=n(e,"P",{});var Ni=h(X);Qt=s(Ni,"This personalized approach has made a huge difference for me. However, remember that once you’ve opened that PR, the review process begins. Embrace feedback, discuss openly, and refine further. Don’t be too narcissistic when it comes to your code. Take other people’s feedback into account, but don’t be afraid to disagree if you can rely on actual facts rather than feelings."),Ni.forEach(t),this.h()},h(){Le(A.src,Yt="/blog/creating-features-in-existing-code/picaboovideo.mp4")||w(A,"src",Yt),w(A,"type","video/mp4"),w(y,"width","320"),w(y,"height","240"),y.controls=!0,y.autoplay=!0,Le(q.src,$t="/blog/creating-features-in-existing-code/StatusQuoPicaboo.png")||w(q,"src",$t),w(q,"alt","The status quo of PICABOO as a diagramm"),w(E,"href","https://www.amazon.de/Pragmatic-Programmer-Journeyman-Master/dp/020161622X"),w(E,"rel","nofollow"),Le(U.src,ei="/blog/creating-features-in-existing-code/TracingBulletsPicaboo.png")||w(U,"src",ei),w(U,"alt","The tracing bullets version of PICABOO"),Le(W.src,ti="/blog/creating-features-in-existing-code/PicabooFinished.png")||w(W,"src",ti),w(W,"alt","The refactored filter settings handling in PICABOO")},m(e,o){r(e,I,o),i(I,Ve),r(e,pe,o),r(e,P,o),i(P,Ge),r(e,me,o),r(e,m,o),i(m,Z),i(Z,We),i(m,Je),i(m,Y),i(Y,Ke),i(m,Qe),i(m,$),i($,Xe),i(m,Ze),i(m,ee),i(ee,Ye),r(e,ge,o),r(e,C,o),i(C,$e),r(e,we,o),r(e,F,o),i(F,et),r(e,ye,o),r(e,y,o),i(y,A),r(e,ve,o),r(e,D,o),i(D,tt),r(e,be,o),r(e,z,o),i(z,it),r(e,Ie,o),r(e,x,o),i(x,ot),r(e,ke,o),r(e,S,o),i(S,at),r(e,_e,o),r(e,T,o),i(T,st),r(e,Ee,o),r(e,B,o),i(B,rt),r(e,Oe,o),r(e,R,o),i(R,q),r(e,Pe,o),r(e,u,o),i(u,lt),i(u,te),i(te,nt),i(u,ht),i(u,ie),i(ie,ft),i(u,dt),i(u,oe),i(oe,ct),i(u,ut),i(u,ae),i(ae,pt),i(u,mt),r(e,Ce,o),r(e,j,o),i(j,gt),r(e,Fe,o),r(e,H,o),i(H,wt),r(e,Ae,o),r(e,k,o),i(k,yt),i(k,E),i(E,vt),i(k,bt),r(e,De,o),r(e,M,o),i(M,It),r(e,ze,o),r(e,N,o),i(N,U),r(e,xe,o),r(e,p,o),i(p,kt),i(p,se),i(se,_t),i(p,Et),i(p,re),i(re,Ot),i(p,Pt),i(p,le),i(le,Ct),i(p,Ft),i(p,ne),i(ne,At),i(p,Dt),r(e,Se,o),r(e,L,o),i(L,zt),r(e,Te,o),r(e,V,o),i(V,xt),r(e,Be,o),r(e,G,o),i(G,St),r(e,Re,o),r(e,O,o),i(O,Tt),i(O,W),r(e,qe,o),r(e,c,o),i(c,Bt),i(c,he),i(he,Rt),i(c,qt),i(c,fe),i(fe,jt),i(c,Ht),i(c,de),i(de,Mt),i(c,Nt),i(c,ce),i(ce,Ut),i(c,Lt),i(c,ue),i(ue,Vt),i(c,Gt),r(e,je,o),r(e,J,o),i(J,Wt),r(e,He,o),r(e,K,o),i(K,Jt),r(e,Me,o),r(e,Q,o),i(Q,Kt),r(e,Ne,o),r(e,X,o),i(X,Qt)},p:Zt,i:Zt,o:Zt,d(e){e&&t(I),e&&t(pe),e&&t(P),e&&t(me),e&&t(m),e&&t(ge),e&&t(C),e&&t(we),e&&t(F),e&&t(ye),e&&t(y),e&&t(ve),e&&t(D),e&&t(be),e&&t(z),e&&t(Ie),e&&t(x),e&&t(ke),e&&t(S),e&&t(_e),e&&t(T),e&&t(Ee),e&&t(B),e&&t(Oe),e&&t(R),e&&t(Pe),e&&t(u),e&&t(Ce),e&&t(j),e&&t(Fe),e&&t(H),e&&t(Ae),e&&t(k),e&&t(De),e&&t(M),e&&t(ze),e&&t(N),e&&t(xe),e&&t(p),e&&t(Se),e&&t(L),e&&t(Te),e&&t(V),e&&t(Be),e&&t(G),e&&t(Re),e&&t(O),e&&t(qe),e&&t(c),e&&t(je),e&&t(J),e&&t(He),e&&t(K),e&&t(Me),e&&t(Q),e&&t(Ne),e&&t(X)}}}const Ki={title:"Adding Features to an existing Codebase",author:"Christian",date:"2024-05-09T00:00:00.000Z",layout:"blog",description:"Updating a legacy system can feel like unraveling a complex knot, especially when the changes impact several parts of the app. This is a challenge I face often, and I've been on a quest to find a strategy that works consistently for me.",published:!0};class Qi extends Li{constructor(I){super(),Vi(this,I,null,Wi,Gi,{})}}export{Qi as default,Ki as metadata};
