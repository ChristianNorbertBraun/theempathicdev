import{S as Ji,i as Ki,s as Qi,k as n,q as s,a as h,l,m as f,r,h as t,c as d,K as Ge,n as m,b as a,E as i,C as $t}from"./index-a710900e.js";function Xi(Vi){let k,We,me,C,Je,ge,g,Y,Ke,Qe,$,Xe,Ze,ee,Ye,$e,te,et,we,F,tt,ye,A,it,ve,b,D,ei,be,z,ot,ke,x,at,Ie,S,st,_e,T,rt,Ee,B,nt,Oe,R,lt,Pe,q,H,ti,Ce,u,ft,ie,ht,dt,oe,ct,ut,ae,pt,mt,se,gt,wt,Fe,j,yt,Ae,M,vt,De,I,bt,E,kt,It,ze,L,_t,xe,N,U,ii,Se,p,Et,re,Ot,Pt,ne,Ct,Ft,le,At,Dt,fe,zt,xt,Te,V,St,Be,G,Tt,Re,W,Bt,qe,O,Rt,J,oi,He,c,qt,he,Ht,jt,de,Mt,Lt,ce,Nt,Ut,ue,Vt,Gt,pe,Wt,Jt,je,K,Kt,Me,Q,Qt,Le,X,Xt,Ne,Z,Zt,Ue,P,Gi='<code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></code>';return{c(){k=n("p"),We=s("Updating a legacy system can feel like unraveling a complex knot, especially when the changes impact several parts of the app. This is a challenge I face often, and I’ve been on a quest to find a strategy that works consistently for me."),me=h(),C=n("p"),Je=s("I’ve managed to develop a process that I now rely on:"),ge=h(),g=n("ol"),Y=n("li"),Ke=s("Understand the problem’s structure"),Qe=h(),$=n("li"),Xe=s("Initiate with tracing bullets – Make it work somehow"),Ze=h(),ee=n("li"),Ye=s("Develop a more refined solution"),$e=h(),te=n("li"),et=s("Refactor again for optimization"),we=h(),F=n("p"),tt=s("Let’s dive into these steps using my work on the PICABOO image editing app as an example."),ye=h(),A=n("p"),it=s("Recently, I had to overhaul how we handle default settings for each filter. We shifted from a single default setting for all filters to a system where the backend allows custom overrides for each and every filter as needed. For example, adding a grain effect by default only for filters mimicking old cameras."),ve=h(),b=n("video"),D=n("source"),be=h(),z=n("p"),ot=s("Now, let’s break down how we tackled this:"),ke=h(),x=n("h2"),at=s("1. Understand the problem’s structure"),Ie=h(),S=n("p"),st=s("Grasping the scope of the problem early is tough for me. I tend to get stuck planning and theorizing, which slows down the actual work. I’ve learned to jump in sooner rather than later, balancing a thorough understanding with forward motion."),_e=h(),T=n("p"),rt=s("First, we identify all the components that the change will touch. At this point, it’s about getting a bird’s-eye view of the system as it stands. What’s the starting point for our changes? Do they affect other modules? Maybe there’s something we can reuse? I like to jot down any initial thoughts or TODOs in the code comments."),Ee=h(),B=n("h3"),nt=s("In the case of PICABOO"),Oe=h(),R=n("p"),lt=s("For PICABOO, I mapped out where the filter settings were integrated within the system and how they’d shift with user interactions. Here’s what that looked like:"),Pe=h(),q=n("p"),H=n("img"),Ce=h(),u=n("p"),ft=s("As illustrated, the "),ie=n("code"),ht=s("FaderSettings"),dt=s(" establish the foundational tone for the workflow. After conversion to "),oe=n("code"),ct=s("NormalizedFilterSettings"),ut=s(", these settings, in conjunction with "),ae=n("code"),pt=s("FilterDefaults"),mt=s(", generate the "),se=n("code"),gt=s("FilterSettings"),wt=s(" employed for displaying and exporting the edited image in the app."),Fe=h(),j=n("p"),yt=s("By the way I failed here on my first go by just skipping it. I thought I knew the codebase inside out. It turns out, I didn’t. I lost an hour fixing mistakes from my assumptions—the fader settings, not the normalized settings, were the key players here."),Ae=h(),M=n("h2"),vt=s("2. Initiate with tracing bullets – Make it functional"),De=h(),I=n("p"),bt=s("Inspired by the "),E=n("a"),kt=s("Pragmatic Programmer Book"),It=s(", I learned to start with a rough, quick version. It’s not about perfection here—it’s about seeing the structure in action."),ze=h(),L=n("h3"),_t=s("In the case of PICABOO"),xe=h(),N=n("p"),U=n("img"),Se=h(),p=n("p"),Et=s("So it seems like there’s much more going on now, and indeed there is. After grasping the initial setup of the filter settings, I integrated the "),re=n("code"),Ot=s("CustomizedFilterSettings"),Pt=s(" directly into the creation process of the filter settings. Consequently, the "),ne=n("code"),Ct=s("FaderSettings"),Ft=s(" couldn’t solely dictate the workflow anymore; the relationship had to be bidirectional. "),le=n("code"),At=s("FaderSettings"),Dt=s(" would generate "),fe=n("code"),zt=s("NormalizedFilterSettings"),xt=s(" and vice versa. This required a fair amount of rapid and rough coding—establishing mock backend data, tweaking settings, and yes, things got pretty chaotic at times."),Te=h(),V=n("h2"),St=s("3. Develop a more refined solution"),Be=h(),G=n("p"),Tt=s(`Now, resist the urge to just patch the initial draft. It’s time to step back, reassess the foundational structure, and redesign the solution from a clearer perspective. I often grab a pen and paper at this stage to sketch out my thoughts and redraw an optimized architecture.
As your solution should be pretty close to the it’s final form after this step, don’t forget to add your unit tests in this step. This way you don’t get bogged down in an architecture that is not testable. It also makes the last step easier, in which you refactor your solution further.`),Re=h(),W=n("h3"),Bt=s("In the case of PICABOO"),qe=h(),O=n("p"),Rt=s(`This led to a complete rewrite of how settings were managed, resulting in a much cleaner system.
`),J=n("img"),He=h(),c=n("p"),qt=s("Once again, we have a unified starting point, the "),he=n("code"),Ht=s("FilterRangesAndDefaultValues"),jt=s(", which can be tailored using the "),de=n("code"),Mt=s("CustomizedFilterSettings"),Lt=s(" for a specific filter. From here, we generate the filter settings for both exported and displayed images by combining the customized "),ce=n("code"),Nt=s("FilterRangesAndDefaultValues"),Ut=s(" with the current "),ue=n("code"),Vt=s("FaderSettings"),Gt=s(". Although this might not seem significantly different from the previous method, it greatly simplifies the addition and modification of filter settings. Essentially, everything originates from the "),pe=n("code"),Wt=s("FilterRangesAndDefaultValues"),Jt=s(", and any changes here trigger compiler errors that help navigate through the entire architecture when necessary. In my view, this strategy is not just a necessary adaptation for integrating custom settings per filter but also an enhancement of the filter settings overall."),je=h(),K=n("h2"),Kt=s("4. Refactor again for optimization"),Me=h(),Q=n("p"),Qt=s("After refining, I create a draft PR to make it easier to review all modifications compared to the base branch. This step allows tweaking, optimizing, and streamlining before finalizing. Add a couple more tests and you are done!"),Le=h(),X=n("h2"),Xt=s("Final note"),Ne=h(),Z=n("p"),Zt=s("This personalized approach has made a huge difference for me. However, remember that once you’ve opened that PR, the review process begins. Embrace feedback, discuss openly, and refine further. Don’t be too narcissistic when it comes to your code. Take other people’s feedback into account, but don’t be afraid to disagree if you can rely on actual facts rather than feelings."),Ue=h(),P=n("pre"),this.h()},l(e){k=l(e,"P",{});var o=f(k);We=r(o,"Updating a legacy system can feel like unraveling a complex knot, especially when the changes impact several parts of the app. This is a challenge I face often, and I’ve been on a quest to find a strategy that works consistently for me."),o.forEach(t),me=d(e),C=l(e,"P",{});var ai=f(C);Je=r(ai,"I’ve managed to develop a process that I now rely on:"),ai.forEach(t),ge=d(e),g=l(e,"OL",{});var _=f(g);Y=l(_,"LI",{});var si=f(Y);Ke=r(si,"Understand the problem’s structure"),si.forEach(t),Qe=d(_),$=l(_,"LI",{});var ri=f($);Xe=r(ri,"Initiate with tracing bullets – Make it work somehow"),ri.forEach(t),Ze=d(_),ee=l(_,"LI",{});var ni=f(ee);Ye=r(ni,"Develop a more refined solution"),ni.forEach(t),$e=d(_),te=l(_,"LI",{});var li=f(te);et=r(li,"Refactor again for optimization"),li.forEach(t),_.forEach(t),we=d(e),F=l(e,"P",{});var fi=f(F);tt=r(fi,"Let’s dive into these steps using my work on the PICABOO image editing app as an example."),fi.forEach(t),ye=d(e),A=l(e,"P",{});var hi=f(A);it=r(hi,"Recently, I had to overhaul how we handle default settings for each filter. We shifted from a single default setting for all filters to a system where the backend allows custom overrides for each and every filter as needed. For example, adding a grain effect by default only for filters mimicking old cameras."),hi.forEach(t),ve=d(e),b=l(e,"VIDEO",{width:!0,height:!0});var di=f(b);D=l(di,"SOURCE",{src:!0,type:!0}),di.forEach(t),be=d(e),z=l(e,"P",{});var ci=f(z);ot=r(ci,"Now, let’s break down how we tackled this:"),ci.forEach(t),ke=d(e),x=l(e,"H2",{});var ui=f(x);at=r(ui,"1. Understand the problem’s structure"),ui.forEach(t),Ie=d(e),S=l(e,"P",{});var pi=f(S);st=r(pi,"Grasping the scope of the problem early is tough for me. I tend to get stuck planning and theorizing, which slows down the actual work. I’ve learned to jump in sooner rather than later, balancing a thorough understanding with forward motion."),pi.forEach(t),_e=d(e),T=l(e,"P",{});var mi=f(T);rt=r(mi,"First, we identify all the components that the change will touch. At this point, it’s about getting a bird’s-eye view of the system as it stands. What’s the starting point for our changes? Do they affect other modules? Maybe there’s something we can reuse? I like to jot down any initial thoughts or TODOs in the code comments."),mi.forEach(t),Ee=d(e),B=l(e,"H3",{});var gi=f(B);nt=r(gi,"In the case of PICABOO"),gi.forEach(t),Oe=d(e),R=l(e,"P",{});var wi=f(R);lt=r(wi,"For PICABOO, I mapped out where the filter settings were integrated within the system and how they’d shift with user interactions. Here’s what that looked like:"),wi.forEach(t),Pe=d(e),q=l(e,"P",{});var yi=f(q);H=l(yi,"IMG",{src:!0,alt:!0}),yi.forEach(t),Ce=d(e),u=l(e,"P",{});var y=f(u);ft=r(y,"As illustrated, the "),ie=l(y,"CODE",{});var vi=f(ie);ht=r(vi,"FaderSettings"),vi.forEach(t),dt=r(y," establish the foundational tone for the workflow. After conversion to "),oe=l(y,"CODE",{});var bi=f(oe);ct=r(bi,"NormalizedFilterSettings"),bi.forEach(t),ut=r(y,", these settings, in conjunction with "),ae=l(y,"CODE",{});var ki=f(ae);pt=r(ki,"FilterDefaults"),ki.forEach(t),mt=r(y,", generate the "),se=l(y,"CODE",{});var Ii=f(se);gt=r(Ii,"FilterSettings"),Ii.forEach(t),wt=r(y," employed for displaying and exporting the edited image in the app."),y.forEach(t),Fe=d(e),j=l(e,"P",{});var _i=f(j);yt=r(_i,"By the way I failed here on my first go by just skipping it. I thought I knew the codebase inside out. It turns out, I didn’t. I lost an hour fixing mistakes from my assumptions—the fader settings, not the normalized settings, were the key players here."),_i.forEach(t),Ae=d(e),M=l(e,"H2",{});var Ei=f(M);vt=r(Ei,"2. Initiate with tracing bullets – Make it functional"),Ei.forEach(t),De=d(e),I=l(e,"P",{});var Ve=f(I);bt=r(Ve,"Inspired by the "),E=l(Ve,"A",{href:!0,rel:!0});var Oi=f(E);kt=r(Oi,"Pragmatic Programmer Book"),Oi.forEach(t),It=r(Ve,", I learned to start with a rough, quick version. It’s not about perfection here—it’s about seeing the structure in action."),Ve.forEach(t),ze=d(e),L=l(e,"H3",{});var Pi=f(L);_t=r(Pi,"In the case of PICABOO"),Pi.forEach(t),xe=d(e),N=l(e,"P",{});var Ci=f(N);U=l(Ci,"IMG",{src:!0,alt:!0}),Ci.forEach(t),Se=d(e),p=l(e,"P",{});var v=f(p);Et=r(v,"So it seems like there’s much more going on now, and indeed there is. After grasping the initial setup of the filter settings, I integrated the "),re=l(v,"CODE",{});var Fi=f(re);Ot=r(Fi,"CustomizedFilterSettings"),Fi.forEach(t),Pt=r(v," directly into the creation process of the filter settings. Consequently, the "),ne=l(v,"CODE",{});var Ai=f(ne);Ct=r(Ai,"FaderSettings"),Ai.forEach(t),Ft=r(v," couldn’t solely dictate the workflow anymore; the relationship had to be bidirectional. "),le=l(v,"CODE",{});var Di=f(le);At=r(Di,"FaderSettings"),Di.forEach(t),Dt=r(v," would generate "),fe=l(v,"CODE",{});var zi=f(fe);zt=r(zi,"NormalizedFilterSettings"),zi.forEach(t),xt=r(v," and vice versa. This required a fair amount of rapid and rough coding—establishing mock backend data, tweaking settings, and yes, things got pretty chaotic at times."),v.forEach(t),Te=d(e),V=l(e,"H2",{});var xi=f(V);St=r(xi,"3. Develop a more refined solution"),xi.forEach(t),Be=d(e),G=l(e,"P",{});var Si=f(G);Tt=r(Si,`Now, resist the urge to just patch the initial draft. It’s time to step back, reassess the foundational structure, and redesign the solution from a clearer perspective. I often grab a pen and paper at this stage to sketch out my thoughts and redraw an optimized architecture.
As your solution should be pretty close to the it’s final form after this step, don’t forget to add your unit tests in this step. This way you don’t get bogged down in an architecture that is not testable. It also makes the last step easier, in which you refactor your solution further.`),Si.forEach(t),Re=d(e),W=l(e,"H3",{});var Ti=f(W);Bt=r(Ti,"In the case of PICABOO"),Ti.forEach(t),qe=d(e),O=l(e,"P",{});var Yt=f(O);Rt=r(Yt,`This led to a complete rewrite of how settings were managed, resulting in a much cleaner system.
`),J=l(Yt,"IMG",{src:!0,alt:!0}),Yt.forEach(t),He=d(e),c=l(e,"P",{});var w=f(c);qt=r(w,"Once again, we have a unified starting point, the "),he=l(w,"CODE",{});var Bi=f(he);Ht=r(Bi,"FilterRangesAndDefaultValues"),Bi.forEach(t),jt=r(w,", which can be tailored using the "),de=l(w,"CODE",{});var Ri=f(de);Mt=r(Ri,"CustomizedFilterSettings"),Ri.forEach(t),Lt=r(w," for a specific filter. From here, we generate the filter settings for both exported and displayed images by combining the customized "),ce=l(w,"CODE",{});var qi=f(ce);Nt=r(qi,"FilterRangesAndDefaultValues"),qi.forEach(t),Ut=r(w," with the current "),ue=l(w,"CODE",{});var Hi=f(ue);Vt=r(Hi,"FaderSettings"),Hi.forEach(t),Gt=r(w,". Although this might not seem significantly different from the previous method, it greatly simplifies the addition and modification of filter settings. Essentially, everything originates from the "),pe=l(w,"CODE",{});var ji=f(pe);Wt=r(ji,"FilterRangesAndDefaultValues"),ji.forEach(t),Jt=r(w,", and any changes here trigger compiler errors that help navigate through the entire architecture when necessary. In my view, this strategy is not just a necessary adaptation for integrating custom settings per filter but also an enhancement of the filter settings overall."),w.forEach(t),je=d(e),K=l(e,"H2",{});var Mi=f(K);Kt=r(Mi,"4. Refactor again for optimization"),Mi.forEach(t),Me=d(e),Q=l(e,"P",{});var Li=f(Q);Qt=r(Li,"After refining, I create a draft PR to make it easier to review all modifications compared to the base branch. This step allows tweaking, optimizing, and streamlining before finalizing. Add a couple more tests and you are done!"),Li.forEach(t),Le=d(e),X=l(e,"H2",{});var Ni=f(X);Xt=r(Ni,"Final note"),Ni.forEach(t),Ne=d(e),Z=l(e,"P",{});var Ui=f(Z);Zt=r(Ui,"This personalized approach has made a huge difference for me. However, remember that once you’ve opened that PR, the review process begins. Embrace feedback, discuss openly, and refine further. Don’t be too narcissistic when it comes to your code. Take other people’s feedback into account, but don’t be afraid to disagree if you can rely on actual facts rather than feelings."),Ui.forEach(t),Ue=d(e),P=l(e,"PRE",{class:!0});var Wi=f(P);Wi.forEach(t),this.h()},h(){Ge(D.src,ei="/blog/creating-features-in-existing-code/picaboovideo.mp4")||m(D,"src",ei),m(D,"type","video/mp4"),m(b,"width","320"),m(b,"height","240"),b.controls=!0,Ge(H.src,ti="/blog/creating-features-in-existing-code/StatusQuoPicaboo.png")||m(H,"src",ti),m(H,"alt","The status quo of PICABOO as a diagramm"),m(E,"href","https://www.amazon.de/Pragmatic-Programmer-Journeyman-Master/dp/020161622X"),m(E,"rel","nofollow"),Ge(U.src,ii="/blog/creating-features-in-existing-code/TracingBulletsPicaboo.png")||m(U,"src",ii),m(U,"alt","The tracing bullets version of PICABOO"),Ge(J.src,oi="/blog/creating-features-in-existing-code/PicabooFinished.png")||m(J,"src",oi),m(J,"alt","The refactored filter settings handling in PICABOO"),m(P,"class","language-swift")},m(e,o){a(e,k,o),i(k,We),a(e,me,o),a(e,C,o),i(C,Je),a(e,ge,o),a(e,g,o),i(g,Y),i(Y,Ke),i(g,Qe),i(g,$),i($,Xe),i(g,Ze),i(g,ee),i(ee,Ye),i(g,$e),i(g,te),i(te,et),a(e,we,o),a(e,F,o),i(F,tt),a(e,ye,o),a(e,A,o),i(A,it),a(e,ve,o),a(e,b,o),i(b,D),a(e,be,o),a(e,z,o),i(z,ot),a(e,ke,o),a(e,x,o),i(x,at),a(e,Ie,o),a(e,S,o),i(S,st),a(e,_e,o),a(e,T,o),i(T,rt),a(e,Ee,o),a(e,B,o),i(B,nt),a(e,Oe,o),a(e,R,o),i(R,lt),a(e,Pe,o),a(e,q,o),i(q,H),a(e,Ce,o),a(e,u,o),i(u,ft),i(u,ie),i(ie,ht),i(u,dt),i(u,oe),i(oe,ct),i(u,ut),i(u,ae),i(ae,pt),i(u,mt),i(u,se),i(se,gt),i(u,wt),a(e,Fe,o),a(e,j,o),i(j,yt),a(e,Ae,o),a(e,M,o),i(M,vt),a(e,De,o),a(e,I,o),i(I,bt),i(I,E),i(E,kt),i(I,It),a(e,ze,o),a(e,L,o),i(L,_t),a(e,xe,o),a(e,N,o),i(N,U),a(e,Se,o),a(e,p,o),i(p,Et),i(p,re),i(re,Ot),i(p,Pt),i(p,ne),i(ne,Ct),i(p,Ft),i(p,le),i(le,At),i(p,Dt),i(p,fe),i(fe,zt),i(p,xt),a(e,Te,o),a(e,V,o),i(V,St),a(e,Be,o),a(e,G,o),i(G,Tt),a(e,Re,o),a(e,W,o),i(W,Bt),a(e,qe,o),a(e,O,o),i(O,Rt),i(O,J),a(e,He,o),a(e,c,o),i(c,qt),i(c,he),i(he,Ht),i(c,jt),i(c,de),i(de,Mt),i(c,Lt),i(c,ce),i(ce,Nt),i(c,Ut),i(c,ue),i(ue,Vt),i(c,Gt),i(c,pe),i(pe,Wt),i(c,Jt),a(e,je,o),a(e,K,o),i(K,Kt),a(e,Me,o),a(e,Q,o),i(Q,Qt),a(e,Le,o),a(e,X,o),i(X,Xt),a(e,Ne,o),a(e,Z,o),i(Z,Zt),a(e,Ue,o),a(e,P,o),P.innerHTML=Gi},p:$t,i:$t,o:$t,d(e){e&&t(k),e&&t(me),e&&t(C),e&&t(ge),e&&t(g),e&&t(we),e&&t(F),e&&t(ye),e&&t(A),e&&t(ve),e&&t(b),e&&t(be),e&&t(z),e&&t(ke),e&&t(x),e&&t(Ie),e&&t(S),e&&t(_e),e&&t(T),e&&t(Ee),e&&t(B),e&&t(Oe),e&&t(R),e&&t(Pe),e&&t(q),e&&t(Ce),e&&t(u),e&&t(Fe),e&&t(j),e&&t(Ae),e&&t(M),e&&t(De),e&&t(I),e&&t(ze),e&&t(L),e&&t(xe),e&&t(N),e&&t(Se),e&&t(p),e&&t(Te),e&&t(V),e&&t(Be),e&&t(G),e&&t(Re),e&&t(W),e&&t(qe),e&&t(O),e&&t(He),e&&t(c),e&&t(je),e&&t(K),e&&t(Me),e&&t(Q),e&&t(Le),e&&t(X),e&&t(Ne),e&&t(Z),e&&t(Ue),e&&t(P)}}}const Yi={title:"Adding Features to an existing Codebase",author:"Christian",date:"2024-05-09T00:00:00.000Z",layout:"blog",description:"Updating a legacy system can feel like unraveling a complex knot, especially when the changes impact several parts of the app. This is a challenge I face often, and I've been on a quest to find a strategy that works consistently for me.",published:!0};class $i extends Ji{constructor(k){super(),Ki(this,k,null,Xi,Qi,{})}}export{$i as default,Yi as metadata};
